<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Entity | Cedar Policy Language Version 2.3 Reference Guide</title> <meta name="generator" content="Jekyll v3.9.3" /> <meta property="og:title" content="Entity" /> <meta property="og:locale" content="en_US" /> <link rel="canonical" href="http://localhost:4000/syntax-entity.html" /> <meta property="og:url" content="http://localhost:4000/syntax-entity.html" /> <meta property="og:site_name" content="Cedar Policy Language Version 2.3 Reference Guide" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Entity" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","headline":"Entity","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/images/Cedar1-green.png"}},"url":"http://localhost:4000/syntax-entity.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="Cedar Policy Language Version 2.3 Reference Guide"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Table of contents</a></li><li class="nav-list-item"><a href="/what-is-cedar.html" class="nav-list-link">What is Cedar?</a></li><li class="nav-list-item"><a href="/terminology.html" class="nav-list-link">Terms & concepts</a></li><li class="nav-list-item"><a href="/scenario.html" class="nav-list-link">Example scenario</a></li><li class="nav-list-item"><a href="/authorization.html" class="nav-list-link">Authorization</a></li><li class="nav-list-item"><a href="/validation.html" class="nav-list-link">Policy validation</a></li><li class="nav-list-item"><a href="/schema.html" class="nav-list-link">Schema format</a></li><li class="nav-list-item"><a href="/templates.html" class="nav-list-link">Policy templates</a></li><li class="nav-list-item active"><button class="nav-list-expander btn-reset" aria-label="toggle items in Policy syntax category" aria-pressed="true"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/syntax.html" class="nav-list-link">Policy syntax</a><ul class="nav-list"><li class="nav-list-item "><a href="/syntax-policy.html" class="nav-list-link">Basic syntax</a></li><li class="nav-list-item active"><a href="/syntax-entity.html" class="nav-list-link active">Entity</a></li><li class="nav-list-item "><a href="/syntax-datatypes.html" class="nav-list-link">Data types</a></li><li class="nav-list-item "><a href="/syntax-operators.html" class="nav-list-link">Operators</a></li><li class="nav-list-item "><a href="/syntax-grammar.html" class="nav-list-link">Grammar</a></li></ul></li><li class="nav-list-item"><a href="/security.html" class="nav-list-link">Security</a></li><li class="nav-list-item"><a href="/doc-history.html" class="nav-list-link">Document history</a></li><li class="nav-list-item"><a href="/about/" class="nav-list-link">About</a></li></ul> </nav> <p>We welcome your feedback about these docs!<br> <a href="mailto:cedar-docs@amazon.com?subject=Feedback&body=My%20name%20%28optional%29:%0D%0A%0D%0AMy%20email%20%28optional%29:%0D%0A%0D%0AWhat%20I%20was%20trying%20to%20do:%0D%0A%0D%0AWhat%20to%20make%20better:">Send feedback by email</a> or use <a href="https://github.com/cedar-policy/cedar-docs/issues">GitHub Issues</a></p> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Cedar Policy Language Version 2.3 Reference Guide" aria-label="Search Cedar Policy Language Version 2.3 Reference Guide" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/syntax.html">Policy syntax</a></li> <li class="breadcrumb-nav-list-item"><span>Entity</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 class="no_toc" id="entities-in-cedar"> <a href="#entities-in-cedar" class="anchor-heading" aria-labelledby="entities-in-cedar"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Entities in Cedar<a name="syntax-entity"></a> </h1> <p>An entity in Cedar is a stored object that serves as the representation for <a href="/syntax-policy.html#term-parc-principal">principals</a>, <a href="/syntax-policy.html#term-parc-action">actions</a>, and <a href="/syntax-policy.html#term-parc-resource">resources</a> that are part of your application.</p> <details open=""> <summary class="text-delta"> Topics on this page </summary> <ul id="markdown-toc"> <li><a href="#overview-of-entities" id="markdown-toc-overview-of-entities">Overview of entities<a name="entity-overview"></a></a></li> <li><a href="#operators" id="markdown-toc-operators">Operators<a name="entity-operators"></a></a></li> <li><a href="#namespaces" id="markdown-toc-namespaces">Namespaces<a name="entity-namespace"></a></a></li> <li><a href="#attributes-of-entities" id="markdown-toc-attributes-of-entities">Attributes of entities<a name="entity-attribute"></a></a></li> </ul> </details> <h2 id="overview-of-entities"> <a href="#overview-of-entities" class="anchor-heading" aria-labelledby="overview-of-entities"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview of entities<a name="entity-overview"></a> </h2> <p>An entity in Cedar has the following components.</p> <ul> <li><strong>An entity type</strong> – The type determines which attributes are required or supported for entities of that type. Examples include things like <code class="language-plaintext highlighter-rouge">User</code>, <code class="language-plaintext highlighter-rouge">Photo</code>, <code class="language-plaintext highlighter-rouge">Album</code>, <code class="language-plaintext highlighter-rouge">Group</code>, or <code class="language-plaintext highlighter-rouge">Account</code>. Define entity types as part of your application’s <a href="/terminology.html#term-schema">schema</a>.</li> <li> <p><strong>An entity identifier (EID)</strong> – The EID lets you reference a specific entity in your policy. The combination of entity type and an EID uniquely identifies an object for Cedar.</p> <blockquote class="important"> <p>This guide includes examples that use simple entity identifiers, such as <code class="language-plaintext highlighter-rouge">jane</code> or <code class="language-plaintext highlighter-rouge">bob</code> for the name of an entity of type <code class="language-plaintext highlighter-rouge">User</code>. This is done to make the examples more readable. However, in a production system it is critical for security reasons that you use unique values that can’t be reused.</p> <p>We recommend that you use values like <a href="https://wikipedia.org/wiki/Universally_unique_identifier">universally unique identifiers (UUIDs)</a>. For example, if user <code class="language-plaintext highlighter-rouge">jane</code> leaves the company, and you later let someone else use the name <code class="language-plaintext highlighter-rouge">jane</code>, then that new user automatically gets access to everything granted by policies that still reference <code class="language-plaintext highlighter-rouge">User::"jane"</code>.</p> <p>Cedar can’t distinguish between the new user and the old. This applies to both principal and resource identifiers. Always use identifiers that are guaranteed unique and never reused to ensure that you don’t unintentionally grant access because of the presence of an old identifier in a policy.</p> <p>Where you use a UUID for an entity, we recommend that you follow it with the <code class="language-plaintext highlighter-rouge">//</code> comment specifier and the ‘friendly’ name of your entity. This helps to make your policies easier to understand. For example:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>principal == User::"a1b2c3d4-e5f6-a1b2-c3d4-EXAMPLE11111", // alice
</code></pre></div> </div> </blockquote> </li> <li><strong>Attributes</strong> – Zero or more attributes that can be of any <a href="/syntax-datatypes.html">data type supported by Cedar</a>. For example, an entity of type <code class="language-plaintext highlighter-rouge">Photo</code> might contain attributes like a <code class="language-plaintext highlighter-rouge">name</code> (a <a href="/syntax-datatypes.html#datatype-string">string</a>), a <code class="language-plaintext highlighter-rouge">createdDate</code> (a string containing a date), a <code class="language-plaintext highlighter-rouge">location</code> (a <a href="/syntax-datatypes.html#datatype-set">set</a> of type <a href="/syntax-datatypes.html#datatype-decimal">Decimal</a> that represent coordinates), and the <code class="language-plaintext highlighter-rouge">photographer</code> (a reference to another entity representing the user who took the photo). Define the attributes relevant to an entity type as part of your application’s schema.</li> </ul> <p>Entities can be grouped into <a href="/terminology.html#term-group">logical hierarchies</a>. You create a hierarchy by specifying a <code class="language-plaintext highlighter-rouge">parent</code> attribute that points to the group of which the entity is a member. Hierarchies allow you to arrange your entities according to the requirements of your scenario. For example, if your application has an entity that represents a <code class="language-plaintext highlighter-rouge">Photo</code>, then you can arrange those photos into one or more <code class="language-plaintext highlighter-rouge">Album</code> groups.</p> <p>An entity can have multiple parent entities, and entities can be nested. For example, you could define an <code class="language-plaintext highlighter-rouge">Album</code> called <code class="language-plaintext highlighter-rouge">trips</code> that is the parent of another <code class="language-plaintext highlighter-rouge">Album</code> called <code class="language-plaintext highlighter-rouge">vacations</code>. That <code class="language-plaintext highlighter-rouge">Album</code> could then be the parent of several <code class="language-plaintext highlighter-rouge">Photo</code> entities. A <code class="language-plaintext highlighter-rouge">photo</code> in the <code class="language-plaintext highlighter-rouge">Vacations</code> album could at the same time also be in an album named <code class="language-plaintext highlighter-rouge">picturesOfBob</code>. To do this, you simply designate an additional <code class="language-plaintext highlighter-rouge">parent</code> attribute to the photo that points to the additional album.</p> <p>You can use as many types of entities as your scenario requires. We recommend that you define these formally by using a <a href="/terminology.html#term-schema">schema</a>.</p> <p>This general structure lets Cedar support scenarios where a single entity type can perform in multiple roles. For example, consider a user directory, such as an LDAP system. Such a user directory must support fine-grained permissions to restrict who can read and write the contents of the directory. A policy in such a situation might need to express concepts like the following:</p> <ul> <li>Any user can read their own data.</li> <li>Any user who belongs to the Human Resources department can update the information for any other users.</li> </ul> <p>In these scenarios, both the principal and the resource can be the same type of entity, or even the same user.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// Allow every user to read their own data in the user directory
permit (
    principal,
    action == Action::"readUser",
    resource
)
when {
    principal == resource //The same entity
};
</code></pre></div></div> <p>This example allows any principal to perform the <code class="language-plaintext highlighter-rouge">readUser</code> action on any resource, as long as the <code class="language-plaintext highlighter-rouge">principal</code> and the <code class="language-plaintext highlighter-rouge">resource</code> in the request are the same entity.</p> <p>Except for action entities, which are prefixed with the reserved keyword <code class="language-plaintext highlighter-rouge">action</code>, there is no way to distinguish whether an entity should behave as a principal, resource, or both without additional context. You can use entity types to constrain how an entity type can be used.</p> <h2 id="operators"> <a href="#operators" class="anchor-heading" aria-labelledby="operators"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Operators<a name="entity-operators"></a> </h2> <p>Entities support the following operators in a Cedar policy:</p> <ul> <li><strong>Equality</strong> – Using the <code class="language-plaintext highlighter-rouge">==</code> operator, you can compare two entities to see if they are the same. Equality in this context means that they are literally the same entity and have the same unique entity identifier. For more information, see <a href="/syntax-operators.html#operator-equality"><code class="language-plaintext highlighter-rouge">==</code> equality operator</a>.</li> <li><strong>Hierarchy / membership</strong> – Using the <code class="language-plaintext highlighter-rouge">in</code> operator, you can determine if one entity is a descendant of (or a member of) another entity’s hierarchy. For more information, see <a href="/syntax-operators.html#operator-in">in operator</a>.</li> <li><strong>Attribute presence</strong> – Using the <a href="/syntax-operators.html#operator-has">has operator</a>, you can determine if the entity has a specific attribute. You can use this operator to ensure that an attribute is present before attempting to access its value. If you attempt to access an attribute that doesn’t exist for the specified entity, it generates an error.</li> <li><strong>Attribute access</strong> – Using the <code class="language-plaintext highlighter-rouge">.</code> operator, you can retrieve the value of one of the entity’s attributes using the syntax <code class="language-plaintext highlighter-rouge">entityName.attributeName</code>. You can define the attributes supported by your entities as part of the <a href="/schema.html">schema</a>.</li> </ul> <h2 id="namespaces"> <a href="#namespaces" class="anchor-heading" aria-labelledby="namespaces"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Namespaces<a name="entity-namespace"></a> </h2> <p>An entity can also be referenced in the context of multiple namespaces. This capability lets you infer a logical hierarchy of entity types. For example, <code class="language-plaintext highlighter-rouge">PhotoFlash::Groups::Album::"vacation"</code> refers to a specific entity with an entity ID of <code class="language-plaintext highlighter-rouge">"vacation"</code> and an entity type of <code class="language-plaintext highlighter-rouge">PhotoFlash::Groups::Album</code>. There is no real structure behind such a string, only what is logically inferred by the designer. You can create namespaces for an entity type when you define a schema.</p> <h2 id="attributes-of-entities"> <a href="#attributes-of-entities" class="anchor-heading" aria-labelledby="attributes-of-entities"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Attributes of entities<a name="entity-attribute"></a> </h2> <p>An attribute is an additional detail about an entity. For example, a user typically has a name. An employee in a company can have an assigned department. A photo can have a description.</p> <p>Attributes are referenced by using dot operator notation (<code class="language-plaintext highlighter-rouge">entity.attribute</code>), as shown by the following examples.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SomeUser.name                  //SomeUser is an entity of type user
SomeEmployee.department        //SomeEmployee is an entity of type employee
SomePhoto.description          //SomePhoto is an entity of type photo.
</code></pre></div></div> <p>Alternatively, you can reference an entity’s attributes by using indexing notation (<code class="language-plaintext highlighter-rouge">entity["attribute"]</code>), as shown by the following examples which are equivalent to the preceding examples.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SomeUser["name"]
SomeEmployee["department"]
SomePhoto["description"]
</code></pre></div></div> <p>An attribute resolves to a value of a <a href="/syntax-datatypes.html">supported datatype</a>. The attribute can be referenced anywhere that a value of that datatype is valid.</p> </main> <hr> <footer> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/cedar-policy/cedar-docs/tree/main/docs/syntax-entity.md" id="edit-this-page">We welcome your feedback. You can edit this page on GitHub.</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
