<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Schema format | Cedar Policy Language Version 2.3 Reference Guide</title> <meta name="generator" content="Jekyll v3.9.3" /> <meta property="og:title" content="Schema format" /> <meta property="og:locale" content="en_US" /> <link rel="canonical" href="http://localhost:4000/schema.html" /> <meta property="og:url" content="http://localhost:4000/schema.html" /> <meta property="og:site_name" content="Cedar Policy Language Version 2.3 Reference Guide" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Schema format" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","headline":"Schema format","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/images/Cedar1-green.png"}},"url":"http://localhost:4000/schema.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="Cedar Policy Language Version 2.3 Reference Guide"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Table of contents</a></li><li class="nav-list-item"><a href="/what-is-cedar.html" class="nav-list-link">What is Cedar?</a></li><li class="nav-list-item"><a href="/terminology.html" class="nav-list-link">Terms & concepts</a></li><li class="nav-list-item"><a href="/scenario.html" class="nav-list-link">Example scenario</a></li><li class="nav-list-item"><a href="/authorization.html" class="nav-list-link">Authorization</a></li><li class="nav-list-item"><a href="/validation.html" class="nav-list-link">Policy validation</a></li><li class="nav-list-item active"><a href="/schema.html" class="nav-list-link active">Schema format</a></li><li class="nav-list-item"><a href="/templates.html" class="nav-list-link">Policy templates</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Policy syntax category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/syntax.html" class="nav-list-link">Policy syntax</a><ul class="nav-list"><li class="nav-list-item "><a href="/syntax-policy.html" class="nav-list-link">Basic syntax</a></li><li class="nav-list-item "><a href="/syntax-entity.html" class="nav-list-link">Entity</a></li><li class="nav-list-item "><a href="/syntax-datatypes.html" class="nav-list-link">Data types</a></li><li class="nav-list-item "><a href="/syntax-operators.html" class="nav-list-link">Operators</a></li><li class="nav-list-item "><a href="/syntax-grammar.html" class="nav-list-link">Grammar</a></li></ul></li><li class="nav-list-item"><a href="/security.html" class="nav-list-link">Security</a></li><li class="nav-list-item"><a href="/doc-history.html" class="nav-list-link">Document history</a></li><li class="nav-list-item"><a href="/about/" class="nav-list-link">About</a></li></ul> </nav> <p>We welcome your feedback about these docs!<br> <a href="mailto:cedar-docs@amazon.com?subject=Feedback&body=My%20name%20%28optional%29:%0D%0A%0D%0AMy%20email%20%28optional%29:%0D%0A%0D%0AWhat%20I%20was%20trying%20to%20do:%0D%0A%0D%0AWhat%20to%20make%20better:">Send feedback by email</a> or use <a href="https://github.com/cedar-policy/cedar-docs/issues">GitHub Issues</a></p> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Cedar Policy Language Version 2.3 Reference Guide" aria-label="Search Cedar Policy Language Version 2.3 Reference Guide" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content"> <main> <h1 class="no_toc" id="cedar-schema-format"> <a href="#cedar-schema-format" class="anchor-heading" aria-labelledby="cedar-schema-format"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Cedar schema format<a name="schema"></a> </h1> <details open=""> <summary class="text-delta"> Topics on this page </summary> <ul id="markdown-toc"> <li><a href="#overview" id="markdown-toc-overview">Overview<a name="schema-overview"></a></a></li> <li><a href="#schema-format" id="markdown-toc-schema-format">Schema format<a name="schema-format"></a></a></li> <li><a href="#namespace" id="markdown-toc-namespace">Namespace<a name="schema-namespace"></a></a></li> <li><a href="#entitytypes" id="markdown-toc-entitytypes"><code class="language-plaintext highlighter-rouge">entityTypes</code><a name="schema-entityTypes"></a></a> <ul> <li><a href="#entity-type-name" id="markdown-toc-entity-type-name">Entity type name<a name="schema-entitytypes-name"></a></a></li> <li><a href="#memberoftypes" id="markdown-toc-memberoftypes"><code class="language-plaintext highlighter-rouge">memberOfTypes</code><a name="schema-entitytypes-memberOf"></a></a></li> <li><a href="#shape" id="markdown-toc-shape"><code class="language-plaintext highlighter-rouge">shape</code><a name="schema-entitytypes-shape"></a></a></li> <li><a href="#attribute-specifications" id="markdown-toc-attribute-specifications">Attribute specifications<a name="schema-attributes-specs"></a></a></li> <li><a href="#attribute-types" id="markdown-toc-attribute-types">Attribute types<a name="schema-attributes-types"></a></a></li> </ul> </li> <li><a href="#actions" id="markdown-toc-actions"><code class="language-plaintext highlighter-rouge">actions</code><a name="schema-actions"></a></a> <ul> <li><a href="#action-name" id="markdown-toc-action-name">Action name<a name="schema-actions-name"></a></a></li> <li><a href="#memberof" id="markdown-toc-memberof"><code class="language-plaintext highlighter-rouge">memberOf</code><a name="schema-actions-memberOf"></a></a></li> <li><a href="#appliesto" id="markdown-toc-appliesto"><code class="language-plaintext highlighter-rouge">appliesTo</code><a name="schema-actions-appliesTo"></a></a></li> <li><a href="#context" id="markdown-toc-context"><code class="language-plaintext highlighter-rouge">context</code><a name="schema-actions-context"></a></a></li> </ul> </li> <li><a href="#commontypes" id="markdown-toc-commontypes"><code class="language-plaintext highlighter-rouge">commonTypes</code></a> <ul> <li><a href="#motivation" id="markdown-toc-motivation">Motivation</a></li> <li><a href="#structure" id="markdown-toc-structure">Structure</a></li> </ul> </li> <li><a href="#example-schema" id="markdown-toc-example-schema">Example schema<a name="schema-examples"></a></a></li> </ul> </details> <h2 id="overview"> <a href="#overview" class="anchor-heading" aria-labelledby="overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview<a name="schema-overview"></a> </h2> <p>A schema is a declaration of the structure of the entity types that you want to support in your application and for which you want Cedar to provide authorization services. Cedar uses <a href="https://json.org">JSON</a> to define a schema. It bears some resemblance to <a href="https://json-schema.org/">JSON Schema</a>, but unique aspects of the design of Cedar, such as its use of entity types, require some differences.</p> <p>You can use a schema to define each of the following entities used by your application:</p> <ul> <li><strong>Principals</strong> – The entities that represent the users of your application. In the schema for the example PhotoFlash application, the principals consist of the <code class="language-plaintext highlighter-rouge">user</code> and <code class="language-plaintext highlighter-rouge">group</code> entity types. You can define the properties of each principal, such as a name, age, address, or any other characteristic that is important to your application.</li> <li><strong>Resources</strong> – The entities that your principals can interact with. In the PhotoFlash application, resource entities could include the photo and the album resource types. These resource entities can also include the properties of each resource, such as a photo’s name, location where taken, resolution, codec type, and so on.</li> <li><strong>Actions</strong> – The operations that principals can perform on your resources. These operations include specifying which resource types each action can apply to and which principal types can perform each action. In the PhotoFlash application, actions include viewing photos, sharing photos, and commenting on photos.</li> </ul> <p>Services that use Cedar can use the information provided in the schema to validate the policies you submit to the policy store. This helps prevent your policies from returning incorrect authorization decisions because of errors in policies like incorrectly typed attribute names. For more information about validating your policies, see <a href="/validation.html">Cedar policy validation against schema</a>.</p> <h2 id="schema-format"> <a href="#schema-format" class="anchor-heading" aria-labelledby="schema-format"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Schema format<a name="schema-format"></a> </h2> <p>A schema contains a declaration of one or more namespaces, each of which contains two mandatory JSON objects, <code class="language-plaintext highlighter-rouge">entityTypes</code> and <code class="language-plaintext highlighter-rouge">actions</code>. A namespace declaration can optionally include a third object, <code class="language-plaintext highlighter-rouge">commonTypes</code>, which defines types that can be referenced by the other two objects. We consider the format of namespaces and these three objects next.</p> <h2 id="namespace"> <a href="#namespace" class="anchor-heading" aria-labelledby="namespace"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Namespace<a name="schema-namespace"></a> </h2> <p>A <a href="/terminology.html#term-namespaces">namespace</a> declaration identifies and defines a scope for all entity types and actions declared within it. The namespace is a string that uses double colons (<code class="language-plaintext highlighter-rouge">::</code>) as separators between its elements, which must be identifiers. A namespace can be empty (i.e., the empty string).</p> <blockquote class="important"> <p>The namespace name must be normalized and cannot include any embedded whitespace, such as spaces, newlines, control characters, or comments.</p> </blockquote> <p>A namespace declaration contains a comma-separated list of JSON objects within braces <code class="language-plaintext highlighter-rouge">{ }</code>. The following is an example of a namespace declaration:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"My::Namespace": {
    &lt;JSON object&gt;, 
        ...
    &lt;JSON object&gt;
}
</code></pre></div></div> <p>A namespace declaration must contain two child elements, and may contain a third, appearing in any order:</p> <ul> <li><code class="language-plaintext highlighter-rouge">entityTypes</code></li> <li><code class="language-plaintext highlighter-rouge">actions</code></li> <li><code class="language-plaintext highlighter-rouge">commonTypes</code> (optional)</li> </ul> <p>You define the types of your application’s principal and resource entities within the <code class="language-plaintext highlighter-rouge">entityTypes</code> element, and the specific actions in the <code class="language-plaintext highlighter-rouge">actions</code> element. Principals and resources are separated from actions because actions are defined in the schema as individual discrete elements (each of which has type <code class="language-plaintext highlighter-rouge">Action</code>), whereas only the <code class="language-plaintext highlighter-rouge">principal</code> and <code class="language-plaintext highlighter-rouge">resource</code> entities’ <em>types</em> are defined. In your entity store you create individual principal and resource entities that have these types. Optionally, you can define type names in <code class="language-plaintext highlighter-rouge">commonTypes</code> and reference those names as types in the <code class="language-plaintext highlighter-rouge">entityTypes</code> and <code class="language-plaintext highlighter-rouge">actions</code> elements of your schema.</p> <p>The declared namespace is automatically prepended to all types defined within the associated scope. For example, consider the following schema:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "ExampleCo::Database": {
        "entityTypes": {
            "Table": {
                ...
            }
        },
        "actions": {
            "createTable": {
                ...
            }
        }
    }
}
</code></pre></div></div> <p>Here, the schema is effectively defining the action entity <code class="language-plaintext highlighter-rouge">ExampleCo::Database::Action::"createTable"</code> and the entity type <code class="language-plaintext highlighter-rouge">ExampleCo::Database::Table</code>.</p> <p>You can reference entity types and actions defined in other namespaces of the same schema by using their fully qualified names. For example, here is a schema that declares two namespaces, <code class="language-plaintext highlighter-rouge">ExampleCo::Clients</code> and <code class="language-plaintext highlighter-rouge">ExampleCo::Furniture</code>, where the second namespace’s entity type <code class="language-plaintext highlighter-rouge">Table</code> references the first’s entity type <code class="language-plaintext highlighter-rouge">Manufacturer</code>.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "ExampleCo::Clients": {
        "entityTypes": {
            "Manufacturer": { ... }
        },
        "actions": { ... }
    },
    "ExampleCo::Furniture": {
        "entityTypes": {
            "Table": {
                "shape": {
                    "type": "Record",
                    "attributes": {
                        "manufacturer": {
                            "type": "Entity",
                            "name": "ExampleCo::Clients::Manufacturer"
                        }
                    }
                }
            }
        },
        "actions": { ... }
    }
}
</code></pre></div></div> <p>If you change a declared namespace in your schema you will need to change the entity types appearing in your policies and/or in other namespaces declared in your schema to instead reference the changed namespace.</p> <h2 id="entitytypes"> <a href="#entitytypes" class="anchor-heading" aria-labelledby="entitytypes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">entityTypes</code><a name="schema-entityTypes"></a> </h2> <p>A collection of the <code class="language-plaintext highlighter-rouge">principal</code> and <code class="language-plaintext highlighter-rouge">resource</code> entity types supported by your application. The <code class="language-plaintext highlighter-rouge">entityTypes</code> element contains a comma-separated list of JSON objects.</p> <p>The high-level structure of an <code class="language-plaintext highlighter-rouge">entityTypes</code> entry looks like the following example.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"entityTypes": {
    "EntityTypeName1": {
        "memberOfTypes": [ "parentGroupTypeName1", "parentGroupTypeName2", … ],
        "shape": { … }
    },
    "EntityTypeName2": {
        "memberOfTypes": [ "parentGroupTypeName1", "parentGroupTypeName2", … ],
        "shape": { … }
    }
}
</code></pre></div></div> <p>Each entry in the <code class="language-plaintext highlighter-rouge">entityTypes</code> is a JSON object with the following properties.</p> <h3 id="entity-type-name"> <a href="#entity-type-name" class="anchor-heading" aria-labelledby="entity-type-name"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Entity type name<a name="schema-entitytypes-name"></a> </h3> <p>Specifies the name of the entity type as a string. This type name must be an identifier, which is defined in the Cedar grammar as a sequence of alphanumeric characters, omitting any Cedar reserved words.</p> <blockquote class="important"> <p>The entity type name must be normalized and cannot include any embedded whitespace, such as spaces, newlines, control characters, or comments.</p> </blockquote> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"My::Name::Space": {
    "entityTypes": {
        "UserGroup": { ... }  // New entity type name
    }
}    
</code></pre></div></div> <p>This type name is qualified by its <a href="#schema-namespace">namespace</a> to form a fully qualified entity type which must be used when referencing this type in a policy.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"My::Name::Space::UserGroup"
</code></pre></div></div> <h3 id="memberoftypes"> <a href="#memberoftypes" class="anchor-heading" aria-labelledby="memberoftypes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">memberOfTypes</code><a name="schema-entitytypes-memberOf"></a> </h3> <p>Specifies a list of entity types that can be direct parents of entities of this type. Values in this list must be valid entity type names declared in the schema. If the <code class="language-plaintext highlighter-rouge">memberOfTypes</code> element is empty or not defined, then entities of that entity type can’t have any parents in the entity hierarchy. The following example shows that an entity of type <code class="language-plaintext highlighter-rouge">User</code> can have parents of type <code class="language-plaintext highlighter-rouge">UserGroup</code>.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"entityTypes": {
    "UserGroup": {
        … 
    },
    "User": {
        "memberOfTypes": [ "UserGroup" ],
        …
    }
}
</code></pre></div></div> <p>If the parent type is part of the same namespace as the child type, then you can reference simply the parent type’s name. If the parent type is in a different namespace than the child type, then you must include the parent type’s namespace as part of the reference. The following example references two parent types, both named <code class="language-plaintext highlighter-rouge">UserGroup</code>. The first <code class="language-plaintext highlighter-rouge">UserGroup</code> is part of the same namespace as the child entity type that this entry is part of. The second <code class="language-plaintext highlighter-rouge">UserGroup</code> is defined in the namespace <code class="language-plaintext highlighter-rouge">Aws::Cognito::UserPool_1</code>.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"memberOfTypes": [ 
    "UserGroup",
    "Aws::Cognito::UserPool_1::UserGroup"
]
</code></pre></div></div> <h3 id="shape"> <a href="#shape" class="anchor-heading" aria-labelledby="shape"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">shape</code><a name="schema-entitytypes-shape"></a> </h3> <p>Specifies the shape of the data stored in entities of this type. The <code class="language-plaintext highlighter-rouge">shape</code> element, if present, must have type <code class="language-plaintext highlighter-rouge">Record</code>, and be accompanied by a description of the entity’s attributes. The following example shows a simple specification of the <code class="language-plaintext highlighter-rouge">User</code> entity type.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"User" : {
    "shape" : {
        "type" : "Record",
        "attributes" : {
            "name" : {
                "type" : "String"
            },
            "age" : {
                "type" : "Long"
            }
        }
    }
}
</code></pre></div></div> <p>Each attribute in the <code class="language-plaintext highlighter-rouge">attributes</code> portion of the <code class="language-plaintext highlighter-rouge">shape</code> record must follow the format described next.</p> <p>Note that if the <code class="language-plaintext highlighter-rouge">shape</code> element is omitted, then entities of the type being defined are assumed to have no data stored with them. This is equivalent to specifying a <code class="language-plaintext highlighter-rouge">Record</code> with <code class="language-plaintext highlighter-rouge">{}</code> for its attributes.</p> <h3 id="attribute-specifications"> <a href="#attribute-specifications" class="anchor-heading" aria-labelledby="attribute-specifications"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Attribute specifications<a name="schema-attributes-specs"></a> </h3> <p>Each attribute in a <code class="language-plaintext highlighter-rouge">Record</code> is a JSON object that describes one attribute in the record associated with entities of this type. It has the form</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    "name" : {
        "type" : "Type"
    },
</code></pre></div></div> <p>where <code class="language-plaintext highlighter-rouge">name</code> is the name of the attribute, and <code class="language-plaintext highlighter-rouge">Type</code> is one of the <a href="/syntax-datatypes.html">Cedar supported data types</a>, discussed in detail below.</p> <p>You can choose to specify whether an attribute is required or optional. By default, attributes that you define are required. This means that policies that reference this type can assume that the attribute is always present. You can make an attribute optional by adding <code class="language-plaintext highlighter-rouge">"required": false</code> to the attribute description. Here is an example:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"jobLevel": { 
    "type": "Long",
    "required": false
},
</code></pre></div></div> <p>A policy should check for an optional attribute’s presence by using the <a href="/syntax-operators.html#operator-has"><code class="language-plaintext highlighter-rouge">has</code></a> operator before trying to access the attribute’s value. If evaluation of a policy results in an attempt to access a non-existent attribute, evaluation fails with an error (which causes the policy to be ignored during authorization, and for a diagnostic to be generated). The validator will flag the potential for such errors to occur.</p> <p>You can choose to explicitly declare that an attribute is mandatory by including <code class="language-plaintext highlighter-rouge">"required": true</code> (but this is unnecessary as mandatory attributes are the default).</p> <h3 id="attribute-types"> <a href="#attribute-types" class="anchor-heading" aria-labelledby="attribute-types"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Attribute types<a name="schema-attributes-types"></a> </h3> <p>Attributes’ <code class="language-plaintext highlighter-rouge">type</code> components can be <code class="language-plaintext highlighter-rouge">"String"</code>, <code class="language-plaintext highlighter-rouge">"Long"</code>, <code class="language-plaintext highlighter-rouge">"Boolean"</code>, <code class="language-plaintext highlighter-rouge">"Record"</code>, <code class="language-plaintext highlighter-rouge">"Set"</code>, <code class="language-plaintext highlighter-rouge">"Entity"</code>, or <code class="language-plaintext highlighter-rouge">"Extension"</code>. The first three require no further information to be specified. The latter four are described below.</p> <h4 class="no_toc" id="record"> <a href="#record" class="anchor-heading" aria-labelledby="record"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">Record</code><a name="schema-entitytypes-shape-record"></a> </h4> <p>A record attribute has the same JSON format as the <a href="#schema-attributes-specs">entity <code class="language-plaintext highlighter-rouge">shape</code>’s record’s attributes</a>. As an example, the following refactors the <code class="language-plaintext highlighter-rouge">User</code> entity specification above to have a <code class="language-plaintext highlighter-rouge">features</code> attribute that is a <code class="language-plaintext highlighter-rouge">Record</code> containing some of the user’s physical features.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"User" : {
    "shape" : {
        "type" : "Record",
        "attributes" : {
            "name" : {
                "type" : "String"
            },
            "features" : {
                "type": "Record",
                "attributes": {
                    "age" : {
                        "type" : "Long"
                    },
                    "height": {
                        "type" : "Long"
                    },
                    "eyecolor": {
                        "type": "String"
                    }
                }
            }
        }
    }
}
</code></pre></div></div> <h4 class="no_toc" id="entity"> <a href="#entity" class="anchor-heading" aria-labelledby="entity"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">Entity</code><a name="schema-entitytypes-shape-entity"></a> </h4> <p>For attributes of type <code class="language-plaintext highlighter-rouge">"Entity"</code>, you must also specify a <code class="language-plaintext highlighter-rouge">name</code> that identifies the entity type of this attribute. The entity type must be defined in the schema. For example, a resource entity might require an <code class="language-plaintext highlighter-rouge">Owner</code> element that specifies a <code class="language-plaintext highlighter-rouge">User</code>.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"Document" : {
    "shape" : {
        "type" : "Record",
        "attributes" : {
            "Owner": {
                "type": "Entity",
                "name": "User"
            }
        }
    }
}
</code></pre></div></div> <h4 class="no_toc" id="set"> <a href="#set" class="anchor-heading" aria-labelledby="set"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">Set</code><a name="schema-entitytypes-shape-set"></a> </h4> <p>For attributes with type <code class="language-plaintext highlighter-rouge">"Set"</code>, you must also specify an <code class="language-plaintext highlighter-rouge">element</code> that defines the properties of the members of the set. Each element is a JSON object that describes what each member of the set looks like.</p> <p>An <code class="language-plaintext highlighter-rouge">element</code> must contain a structure formatted according to the same rules as an attribute. As an example, consider the following <code class="language-plaintext highlighter-rouge">Admins</code> entry which could be part of the <code class="language-plaintext highlighter-rouge">shape</code> record of an <code class="language-plaintext highlighter-rouge">Account</code> entity type. This <code class="language-plaintext highlighter-rouge">Admins</code> element is a set of entities of type <code class="language-plaintext highlighter-rouge">User</code> and could be used to define which users have administrator permissions in the account.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"Group" : {
    "shape" : {
        "type" : "Record",
        "attributes": {
            "Admins": {
                "type": "Set",
                "element": {
                    "type": "Entity",
                    "name": "User"
                }
            }
        }
    }
}
</code></pre></div></div> <h4 class="no_toc" id="extension"> <a href="#extension" class="anchor-heading" aria-labelledby="extension"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">Extension</code><a name="schema-entitytypes-shape-extension"></a> </h4> <p>For attributes of type <code class="language-plaintext highlighter-rouge">"Extension"</code>, you must also specify the <code class="language-plaintext highlighter-rouge">name</code> of the specific extension type. There are two extension types: <code class="language-plaintext highlighter-rouge">ipaddr</code> for IP address values, and <code class="language-plaintext highlighter-rouge">decimal</code> for decimal values. For example, a <code class="language-plaintext highlighter-rouge">Network</code> entity may include the IP address of its gateway.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"Network": {
    "shape": {
        "type": "Record",
        "attributes": {
            "gateway": {
                "type": "Extension",
                "name": "ipaddr"
            }
        }
    }
}
</code></pre></div></div> <h2 id="actions"> <a href="#actions" class="anchor-heading" aria-labelledby="actions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">actions</code><a name="schema-actions"></a> </h2> <p>A collection of the <code class="language-plaintext highlighter-rouge">Action</code> entities usable as actions in authorization requests submitted by your application. The <code class="language-plaintext highlighter-rouge">actions</code> element contains a comma-separated list of one or more JSON objects.</p> <p>The high-level structure of an <code class="language-plaintext highlighter-rouge">actions</code> entry looks like the following.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"actions": {
    "ActionName1": {
        "memberOf": ["ActionGroupName1",...],
        "appliesTo": {
            "principalTypes": ["PrincipalEntityType1",...],
            "resourceTypes": ["ResourceEntityType1",...],
        }
    },
    "ActionName2": { ... },
    ...
}
</code></pre></div></div> <p>You can add as many actions as your application requires.</p> <h3 id="action-name"> <a href="#action-name" class="anchor-heading" aria-labelledby="action-name"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Action name<a name="schema-actions-name"></a> </h3> <p>Specifies the identifier for the action entity, as a string. The name of the action isn’t a value but the heading for its own JSON object. Since this is an <a href="/syntax-entity.html#entity-overview">entity identifier</a> (rather than an entity type, as in the <code class="language-plaintext highlighter-rouge">entityTypes</code> section) it can contain anything that would be valid inside a Cedar string.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"actions": {
    "ViewPhoto": {
        ...
    },
    "ListPhotos": {
        ...
    },
    ...
}
</code></pre></div></div> <p>You can then refer to these actions in your policies by using the following syntax. If the schema declares a namespace, then the entity type <code class="language-plaintext highlighter-rouge">Action</code> is qualified by that namespace.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MyApplicationNamespace::Action::"ViewPhoto"
</code></pre></div></div> <h3 id="memberof"> <a href="#memberof" class="anchor-heading" aria-labelledby="memberof"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">memberOf</code><a name="schema-actions-memberOf"></a> </h3> <p>Specifies a list of action entity groups the action is a member of. The <code class="language-plaintext highlighter-rouge">memberOf</code> component is optional. If omitted, it means the action is a member of no action groups.</p> <p>The following schema snippet shows an action named <code class="language-plaintext highlighter-rouge">viewAlbum</code> that is a member of the action group called <code class="language-plaintext highlighter-rouge">viewImages</code>.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"actions": {
    "viewAlbum": { 
        … 
        "memberOf": [ 
            {
                "id": "viewImages",
                "type": "PhotoFlash::Images::Action"
            },
        ],
        …            
    }
}
</code></pre></div></div> <p>Action groups are themselves actions, and thus must also be defined in the schema in the <code class="language-plaintext highlighter-rouge">actions</code> section; we’ll see an example of that below.</p> <h3 id="appliesto"> <a href="#appliesto" class="anchor-heading" aria-labelledby="appliesto"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">appliesTo</code><a name="schema-actions-appliesTo"></a> </h3> <p>Specifies a JSON object containing two lists, <code class="language-plaintext highlighter-rouge">principalTypes</code> and <code class="language-plaintext highlighter-rouge">resourceTypes</code>, which contain the principal and resources entity types, respectively, that can accompany the action in an authorization request.</p> <ul> <li>If the <code class="language-plaintext highlighter-rouge">principalTypes</code> component is omitted from the <code class="language-plaintext highlighter-rouge">appliesTo</code> element, then an authorization request with this action can have a principal entity of <em>any</em> type, or the unspecified entity. The same is true for <code class="language-plaintext highlighter-rouge">resourceTypes</code>, for a request’s resource component. If the <code class="language-plaintext highlighter-rouge">appliesTo</code> component is omitted entirely, it’s the same as if it were present with both <code class="language-plaintext highlighter-rouge">principalTypes</code> and <code class="language-plaintext highlighter-rouge">resourceTypes</code> components omitted (i.e., a request can have both principal and resource entities of any type, or leave them unspecified).</li> <li>If either the <code class="language-plaintext highlighter-rouge">principalTypes</code> or <code class="language-plaintext highlighter-rouge">resourceTypes</code> components is given with an empty list <code class="language-plaintext highlighter-rouge">[]</code>, the associated action is not permitted in an authorization request with <em>any</em> entities of that category. This effectively means that the action will not be used in an authorization request at all. This makes sense for actions that act as groups for other actions.</li> </ul> <p>The following example <code class="language-plaintext highlighter-rouge">actions</code> snippet shows three actions. The first action, <code class="language-plaintext highlighter-rouge">read</code>, is an action group for the other two. It cannot appear in an authorization request because its <code class="language-plaintext highlighter-rouge">principalTypes</code> and <code class="language-plaintext highlighter-rouge">resourceTypes</code> components are <code class="language-plaintext highlighter-rouge">[]</code>. The second action, <code class="language-plaintext highlighter-rouge">viewPhoto</code>, is a member of the <code class="language-plaintext highlighter-rouge">read</code> action group, and expects that any request with this action will have a principal entity of type <code class="language-plaintext highlighter-rouge">User</code> and a resource entity of type <code class="language-plaintext highlighter-rouge">Photo</code>. The third action, <code class="language-plaintext highlighter-rouge">listAlbums</code>, also a member of the <code class="language-plaintext highlighter-rouge">read</code> group, expects that a request with that action will have a principal entity of type <code class="language-plaintext highlighter-rouge">User</code> and a resource entity of type <code class="language-plaintext highlighter-rouge">Account</code>. Notice that for both of the latter two actions, the group membership only requires giving the ID of the action – <code class="language-plaintext highlighter-rouge">"read"</code> – and not the type. This is because the validator knows that all action groups must have type <code class="language-plaintext highlighter-rouge">Action</code>, and by default the action will be within the current namespace. To declare membership in an action group in a different namespace you need to include <code class="language-plaintext highlighter-rouge">"type": "My::Namespace::Action"</code> alongside the <code class="language-plaintext highlighter-rouge">"id"</code> portion, where <code class="language-plaintext highlighter-rouge">My::Namespace</code> is the different namespace.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"actions": {
    "read": {
        "appliesTo": {
            "principalTypes": [],
            "resourceTypes": []
        }
    },
    "viewPhoto": {
        "memberOf": [
            {
                "id": "read"
            }
        ],
        "appliesTo": {
            "principalTypes": [ "User" ],
            "resourceTypes": [ "Photo" ]
        }
    },
    "listAlbums": {
        "memberOf": [
            {
                "id": "read"
            }
        ],
        "appliesTo": {
            "principalTypes": [ "User" ],
            "resourceTypes": [ "Account" ]
        }
    }
}
</code></pre></div></div> <h3 id="context"> <a href="#context" class="anchor-heading" aria-labelledby="context"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">context</code><a name="schema-actions-context"></a> </h3> <p>Specifies a JSON object in the same format as an entity’s <code class="language-plaintext highlighter-rouge">shape</code> property, which defines the attributes that can be present in the context record in authorization requests made with this action. Specifying a <code class="language-plaintext highlighter-rouge">context</code> enables Cedar to validate policies that attempt to reference the <code class="language-plaintext highlighter-rouge">context</code> record’s attributes.</p> <p>Each <code class="language-plaintext highlighter-rouge">context</code> entry consists of <code class="language-plaintext highlighter-rouge">type</code> and <code class="language-plaintext highlighter-rouge">attributes</code> objects. The <code class="language-plaintext highlighter-rouge">type</code> object is always the type <code class="language-plaintext highlighter-rouge">Record</code>. The <code class="language-plaintext highlighter-rouge">attributes</code> object has the same JSON format as the <a href="#schema-attributes-specs">entity <code class="language-plaintext highlighter-rouge">shape</code>’s record’s attributes</a>. For example, the following <code class="language-plaintext highlighter-rouge">context</code> snippet specifies that any request to perform the <code class="language-plaintext highlighter-rouge">SomeAction</code> action must include a <code class="language-plaintext highlighter-rouge">Boolean</code> attribute named <code class="language-plaintext highlighter-rouge">field1</code> and a <code class="language-plaintext highlighter-rouge">Long</code>attribute named <code class="language-plaintext highlighter-rouge">field2</code>. Optionally, the <code class="language-plaintext highlighter-rouge">context</code> may include a third attribute <code class="language-plaintext highlighter-rouge">field3</code> which, if present, is a <code class="language-plaintext highlighter-rouge">String</code>. The <code class="language-plaintext highlighter-rouge">context</code> entry is optional, and if excluded it is assumed to be an empty <code class="language-plaintext highlighter-rouge">Record</code> (in which case policies that try to access attributes in <code class="language-plaintext highlighter-rouge">context</code> will produce validation errors).</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"actions": {
    "SomeAction": {
        "appliesTo": {
            "principalTypes": [ ... ],
            "resourceTypes": [ ... ],
            "context": {
                "type": "Record",
                "attributes": {
                    "field1": { "type": "Boolean" },
                    "field2": { "type": "Long" },
                    "field3": { "type": "String",
                                "required": false }
                }
            }
        }
    }
}
</code></pre></div></div> <h2 id="commontypes"> <a href="#commontypes" class="anchor-heading" aria-labelledby="commontypes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">commonTypes</code> </h2> <p>A collection of type names their definitions. These type names can be referenced in the <code class="language-plaintext highlighter-rouge">entityTypes</code> and <code class="language-plaintext highlighter-rouge">actions</code> portions of the schema wherever a type is expected.</p> <h3 id="motivation"> <a href="#motivation" class="anchor-heading" aria-labelledby="motivation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Motivation </h3> <p>Suppose your schema defines several entity types or action entities that share a lot of elements in common. For example, consider the following actions: both <code class="language-plaintext highlighter-rouge">view</code> and <code class="language-plaintext highlighter-rouge">upload</code> have identical <code class="language-plaintext highlighter-rouge">context</code> components.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"actions": {
    "view": {
        "appliesTo": {
            "context": { 
                "type": "Record",
                "attributes": {
                    "ip": { "type": "Extension", "name": "ipaddr" },
                    "is_authenticated": { "type": "Boolean" },
                    "timestamp": { "type": "Long" }
                }
            }
        }
    },
    "upload": {
        "appliesTo": {
            "context": { 
                "type": "Record",
                "attributes": {
                    "ip": { "type": "Extension", "name": "ipaddr" },
                    "is_authenticated": { "type": "Boolean" },
                    "timestamp": { "type": "Long" }
                }
            }
        }
    }
}
</code></pre></div></div> <p>Instead of redundantly entering common type elements separately for each action / entity type that needs them, you can define them once within <code class="language-plaintext highlighter-rouge">commonTypes</code>, and then refer to the definition in multiple places.</p> <h3 id="structure"> <a href="#structure" class="anchor-heading" aria-labelledby="structure"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Structure </h3> <p>Each JSON object within <code class="language-plaintext highlighter-rouge">commonTypes</code> consists of the name of a type being defined and its associated definition. The definition is specified just like an <a href="#schema-attributes-specs">attribute type specification</a>, i.e.,</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  "TypeName": {
    // attribute type specification
  }
</code></pre></div></div> <p>Returning to our motivating example, we can define a record type called <code class="language-plaintext highlighter-rouge">ReusedContext</code>, which is then referenced by the <code class="language-plaintext highlighter-rouge">view</code> and <code class="language-plaintext highlighter-rouge">upload</code> actions.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
"commonTypes": {
    "ReusedContext": {
        "type": "Record",
        "attributes": {
            "ip": { "type": "Extension", "name": "ipaddr" },
            "is_authenticated": { "type": "Boolean" },
            "timestamp": { "type": "Long" }
        }
    }
},
"actions": {
    "view": {
          "appliesTo": {
                "context": { "type": "ReusedContext" }
          }
    },
    "upload": {
        "appliesTo": {
            "context": { "type": "ReusedContext" }
        }
    }
}
</code></pre></div></div> <p>We can also use type names defined in <code class="language-plaintext highlighter-rouge">commonTypes</code> within definitions in the <code class="language-plaintext highlighter-rouge">entityTypes</code> section. As a simple example, here we define a type <code class="language-plaintext highlighter-rouge">name</code> as a <code class="language-plaintext highlighter-rouge">String</code>, and then use the type (twice) in the <code class="language-plaintext highlighter-rouge">User</code> entity type’s <code class="language-plaintext highlighter-rouge">attributes</code> specifications:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
"commonTypes": {
    "name": {
        "type": "String",
    }
},
"entityTypes": {
    "User": {
        "shape": {
            "type": "Record",
            "attributes": {
                "firstName": {
                    "type": "name"
                },
                "lastName": {
                    "type": "name"
                }
            }
        }
    }
}
</code></pre></div></div> <p>As another example, we can use a defined record type for the <code class="language-plaintext highlighter-rouge">shape</code> of multiple entity types. In particular, we collect a set of attributes as a record named <code class="language-plaintext highlighter-rouge">Person</code> and use <code class="language-plaintext highlighter-rouge">Person</code> within the <code class="language-plaintext highlighter-rouge">Employee</code> and <code class="language-plaintext highlighter-rouge">Customer</code> entity type definitions.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
"commonTypes": {
    "Person": {
        "type": "Record",
        "attributes": {
            "age": {"type": "Long"},
            "name": {"type": "String"}
        }
    }
},
"entityTypes": {
    "Employee": { "shape": { "type": "Person" } },
    "Customer": { "shape": { "type": "Person" } }
}
</code></pre></div></div> <p>If you then send an <code class="language-plaintext highlighter-rouge">Employee</code> entity as the principal in an authorization request, you could evaluate the attributes of that principal by using syntax similar to this example: <code class="language-plaintext highlighter-rouge">principal.age</code>.</p> <p>Note that definitions of types appearing in <code class="language-plaintext highlighter-rouge">commonTypes</code> cannot refer to one another. For example, if both <code class="language-plaintext highlighter-rouge">name</code> and <code class="language-plaintext highlighter-rouge">Person</code> from the above example were in the same <code class="language-plaintext highlighter-rouge">commonTypes</code> section, you could not change <code class="language-plaintext highlighter-rouge">Person</code>’s define to refer to objects of type <code class="language-plaintext highlighter-rouge">name</code>.</p> <h2 id="example-schema"> <a href="#example-schema" class="anchor-heading" aria-labelledby="example-schema"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example schema<a name="schema-examples"></a> </h2> <p>The following schema is for a hypothetical application called PhotoFlash.</p> <p>The schema defines a <code class="language-plaintext highlighter-rouge">User</code> entity that can have a <code class="language-plaintext highlighter-rouge">department</code> and a <code class="language-plaintext highlighter-rouge">jobLevel</code>. The user can be a member of a <code class="language-plaintext highlighter-rouge">UserGroup</code>.</p> <p>The schema also defines the following three resource types:</p> <ul> <li>An <code class="language-plaintext highlighter-rouge">Account</code> can have one <code class="language-plaintext highlighter-rouge">owner</code> and zero or more <code class="language-plaintext highlighter-rouge">admins</code> that are all <code class="language-plaintext highlighter-rouge">User</code> entities.</li> <li>An <code class="language-plaintext highlighter-rouge">Album</code> can be nested inside another <code class="language-plaintext highlighter-rouge">Album</code>, and has a Boolean <code class="language-plaintext highlighter-rouge">private</code> attribute, and a reference to an <code class="language-plaintext highlighter-rouge">Account</code>.</li> <li>A <code class="language-plaintext highlighter-rouge">Photo</code> can be placed in an <code class="language-plaintext highlighter-rouge">Album</code>, and also has a <code class="language-plaintext highlighter-rouge">private</code> attribute and a reference to an <code class="language-plaintext highlighter-rouge">Account</code>.</li> </ul> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "PhotoFlash": {
        "entityTypes": {
            "User": {
                "memberOfTypes": [ "UserGroup" ],
                "shape": {
                    "type": "Record",
                    "attributes": {
                        "department": { "type": "String" },
                        "jobLevel": { "type": "Long" }
                    }
                }
            },
            "UserGroup": { },
            "Photo": {
                "memberOfTypes": [ "Album" ],
                "shape": {
                    "type": "Record",
                    "attributes": {
                        "private": { "type": "Boolean" },
                        "account": {
                            "type": "Entity",
                            "name": "Account"
                        }
                    }
                }
            },
            "Album": {
                "memberOfTypes": [ "Album" ],
                "shape": {
                    "type": "Record",
                    "attributes": {
                        "private": { "type": "Boolean" },
                        "account": {
                            "type": "Entity",
                            "name": "Account"
                        }
                    }
                }
            },
            "Account": {
                "memberOfTypes": [],
                "shape": {
                    "type": "Record",
                    "attributes": {
                        "owner": {
                            "type": "Entity",
                            "name": "User"
                        },
                        "admins": {
                            "required": false,
                            "type": "Set",
                            "element": {
                                "type": "Entity",
                                "name": "User"
                            }
                        }
                    }
                }
            }
        },
        "actions": {
            "viewPhoto": {
                "appliesTo": {
                    "principalTypes": [ "User" ],
                    "resourceTypes": [ "Photo" ],
                    "context": {
                        "type": "Record",
                        "attributes": {
                            "authenticated": { "type": "Boolean" }
                        }
                    }
                }
            },
            "listAlbums": {
                "appliesTo": {
                    "principalTypes": [ "User" ],
                    "resourceTypes": [ "Account" ],
                    "context": {
                        "type": "Record",
                        "attributes": {
                            "authenticated": { "type": "Boolean" }
                        }
                    }
                }
            },
            "uploadPhoto": {
                "appliesTo": {
                    "principalTypes": [ "User" ],
                    "resourceTypes": [ "Album" ],
                    "context": {
                        "type": "Record",
                        "attributes": {
                            "authenticated": { "type": "Boolean" },
                            "photo": {
                                "type": "Record",
                                "attributes": {
                                    "file_size": { "type": "Long" },
                                    "file_type": { "type": "String" }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
</code></pre></div></div> </main> <hr> <footer> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/cedar-policy/cedar-docs/tree/main/docs/schema.md" id="edit-this-page">We welcome your feedback. You can edit this page on GitHub.</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
